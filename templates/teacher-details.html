{% extends 'Home/base.html' %}
{% load static %}
{% block body %}
<div class="page-wrapper">
    <div class="content container-fluid">
        <div class="page-header">
            <div class="row">
                <div class="col-sm-12">
                    <h3 class="page-title">Teacher Details</h3>
                    <ul class="breadcrumb">
                        <li class="breadcrumb-item"><a href="{% url 'index' %}">Dashboard</a></li>
                        <li class="breadcrumb-item"><a href="{% url 'teacher_list' %}">Teachers</a></li>
                        <li class="breadcrumb-item active">Teacher Details</li>
                    </ul>
                </div>
            </div>
        </div>

        {% if selected_teacher %}
        <div class="row">
            <div class="col-md-12">
                <div class="card border-primary">
                    <div class="card-header bg-primary text-white">
                        <h4 class="card-title mb-0"><i class="fas fa-user"></i> {{ selected_teacher.first_name }} {{ selected_teacher.last_name }}</h4>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-4 text-center">
                                <img class="rounded-circle shadow" src="{% if selected_teacher.teacher_image %}{{ selected_teacher.teacher_image.url }}{% else %}{% static 'assets/img/user.jpg' %}{% endif %}" alt="Teacher Image" width="150" height="150">
                            </div>
                            <div class="col-md-8">
                                <table class="table table-sm">
                                    <tbody>
                                        <tr><th style="width:160px">Full Name</th><td>{{ selected_teacher.first_name }} {{ selected_teacher.last_name }}</td></tr>
                                        <tr><th>Email</th><td>{{ selected_teacher.email }}</td></tr>
                                        <tr><th>Mobile</th><td>{{ selected_teacher.mobile }}</td></tr>
                                        <tr><th>Gender</th><td>{{ selected_teacher.gender }}</td></tr>
                                        <tr><th>Date of Birth</th><td>{{ selected_teacher.date_of_birth|date:"F d, Y" }}</td></tr>
                                        <tr><th>Joining Date</th><td>{{ selected_teacher.joining_date|date:"F d, Y" }}</td></tr>
                                        <tr><th>Address</th><td>{{ selected_teacher.address }}</td></tr>
                                    </tbody>
                                </table>
                                <div class="mt-3">
                                    <a href="{% url 'edit_teacher' selected_teacher.pk %}" class="btn btn-sm btn-primary"><i class="fas fa-edit"></i> Edit</a>
                                    <a href="{% url 'delete_teacher' selected_teacher.pk %}" class="btn btn-sm btn-danger" onclick="return confirm('Delete this teacher?')"><i class="fas fa-trash"></i> Delete</a>
                                    <a href="{% url 'teacher_list' %}" class="btn btn-sm btn-secondary"><i class="fas fa-list"></i> All Teachers Page</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {% endif %}

        <div class="row mt-4">
            <div class="col-md-12">
                <div class="card">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h5 class="card-title mb-0">All Teachers</h5>
                        {% if request.user.is_admin %}
                        <a href="{% url 'add_teacher' %}" class="btn btn-sm btn-success"><i class="fas fa-plus"></i> Add Teacher</a>
                        {% endif %}
                    </div>
                    <div class="card-body">
                        {% if teachers %}
                        <div class="table-responsive">
                            <table class="table table-striped table-hover align-middle">
                                <thead class="thead-light">
                                    <tr>
                                        <th>#</th>
                                        <th>Photo</th>
                                        <th>Name</th>
                                        <th>Email</th>
                                        <th>Mobile</th>
                                        <th>Gender</th>
                                        <th>Joining Date</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for t in teachers %}
                                    <tr class="{% if selected_teacher and t.pk == selected_teacher.pk %}table-primary{% endif %}">
                                        <td>{{ forloop.counter }}</td>
                                        <td>
                                            <img class="rounded-circle" src="{% if t.teacher_image %}{{ t.teacher_image.url }}{% else %}{% static 'assets/img/user.jpg' %}{% endif %}" width="45" height="45" alt="{{ t.first_name }}">
                                        </td>
                                        <td><a href="{% url 'teacher_details' t.pk %}">{{ t.first_name }} {{ t.last_name }}</a></td>
                                        <td>{{ t.email }}</td>
                                        <td>{{ t.mobile }}</td>
                                        <td>{{ t.gender }}</td>
                                        <td>{{ t.joining_date|date:"Y-m-d" }}</td>
                                        <td>
                                            <a href="{% url 'edit_teacher' t.pk %}" class="btn btn-sm btn-outline-primary"><i class="fas fa-edit"></i></a>
                                            <a href="{% url 'delete_teacher' t.pk %}" class="btn btn-sm btn-outline-danger" onclick="return confirm('Delete {{ t.first_name }}?')"><i class="fas fa-trash"></i></a>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                        {% else %}
                            <p class="text-muted mb-0">No teachers found.</p>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <footer>
        <p>Copyright Â© 2025 Smart Campus.</p>
    </footer>
</div>
{% endblock %}
