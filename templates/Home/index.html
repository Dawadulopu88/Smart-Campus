{% extends 'Home/base.html' %}
{% load static %}
{% block body %}
   

         <div class="page-wrapper">
            <div class="content container-fluid">
               <div class="page-header">
                  <div class="row">
                     <div class="col-sm-12">
                        <h3 class="page-title">Welcome {{ welcome_user }}!</h3>
                        <ul class="breadcrumb">
                           <li class="breadcrumb-item active">Dashboard</li>
                        </ul>
                     </div>
                  </div>
               </div>
               <div class="row">
                  <div class="col-xl-3 col-sm-6 col-12 d-flex">
                     <div class="card bg-one w-100">
                        <div class="card-body">
                           <div class="db-widgets d-flex justify-content-between align-items-center">
                              <div class="db-icon">
                                 <i class="fas fa-user-graduate"></i>
                              </div>
                              <div class="db-info">
                                 <h3>50055</h3>
                                 <h6>Students</h6>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
                  <div class="col-xl-3 col-sm-6 col-12 d-flex">
                     <div class="card bg-two w-100">
                        <div class="card-body">
                           <div class="db-widgets d-flex justify-content-between align-items-center">
                              <div class="db-icon">
                                 <i class="fas fa-crown"></i>
                              </div>
                              <div class="db-info">
                                 <h3>50+</h3>
                                 <h6>Awards</h6>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
                  <div class="col-xl-3 col-sm-6 col-12 d-flex">
                     <div class="card bg-three w-100">
                        <div class="card-body">
                           <div class="db-widgets d-flex justify-content-between align-items-center">
                              <div class="db-icon">
                                 <i class="fas fa-building"></i>
                              </div>
                              <div class="db-info">
                                 <h3>30+</h3>
                                 <h6>Department</h6>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
                  <div class="col-xl-3 col-sm-6 col-12 d-flex">
                     <div class="card bg-four w-100">
                        <div class="card-body">
                           <div class="db-widgets d-flex justify-content-between align-items-center">
                              <div class="db-icon">
                                 <i class="fas fa-file-invoice-dollar"></i>
                              </div>
                              <div class="db-info">
                                 <h3>$505</h3>
                                 <h6>Revenue</h6>
                              </div>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
               
               <!-- Student List Section -->
               <div class="row">
                  <div class="col-md-12">
                     <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                           <h5 class="card-title mb-0"><i class="fas fa-user-graduate"></i> Student List</h5>
                           {% if request.user.is_admin or request.user.is_teacher %}
                           <a href="{% url 'add_student' %}" class="btn btn-primary btn-sm">
                              <i class="fas fa-plus"></i> Add Student
                           </a>
                           {% endif %}
                        </div>
                        <div class="card-body">
                           <div class="table-responsive">
                              <table class="table table-hover align-middle">
                                 <thead class="thead-light">
                                    <tr>
                                       <th>#</th>
                                       <th>Photo</th>
                                       <th>Student ID</th>
                                       <th>Name</th>
                                       <th>Email</th>
                                       <th>Mobile</th>
                                       <th>Gender</th>
                                       <th>Actions</th>
                                    </tr>
                                 </thead>
                                 <tbody>
                                    {% for student in students %}
                                    <tr>
                                       <td>{{ forloop.counter }}</td>
                                       <td>
                                          <img class="rounded-circle" 
                                               src="{% if student.profile_image %}{{ student.profile_image.url }}{% else %}{% static 'assets/img/user.jpg' %}{% endif %}" 
                                               width="45" height="45" alt="{{ student.first_name }}">
                                       </td>
                                       <td>
                                          <span class="badge badge-info">STU{{ student.id|stringformat:"04d" }}</span>
                                       </td>
                                       <td>
                                          <div>
                                             <strong>{{ student.first_name }} {{ student.last_name|default:'' }}</strong>
                                             <br><small class="text-muted">{{ student.username }}</small>
                                          </div>
                                       </td>
                                       <td>{{ student.email }}</td>
                                       <td>{{ student.mobile|default:'-' }}</td>
                                       <td>
                                          <span class="badge {% if student.gender == 'Male' %}badge-primary{% elif student.gender == 'Female' %}badge-success{% else %}badge-secondary{% endif %}">
                                             {{ student.gender|default:'Not Specified' }}
                                          </span>
                                       </td>
                                       <td>
                                          <div class="btn-group" role="group">
                                             <a href="#" class="btn btn-sm btn-outline-info" title="View Profile">
                                                <i class="fas fa-eye"></i>
                                             </a>
                                             {% if request.user.is_admin or request.user.is_teacher %}
                                             <a href="#" class="btn btn-sm btn-outline-primary" title="Edit">
                                                <i class="fas fa-edit"></i>
                                             </a>
                                             {% endif %}
                                             {% if request.user.is_admin %}
                                             <a href="#" class="btn btn-sm btn-outline-danger" title="Delete" 
                                                onclick="return confirm('Delete {{ student.first_name }}?')">
                                                <i class="fas fa-trash"></i>
                                             </a>
                                             {% endif %}
                                          </div>
                                       </td>
                                    </tr>
                                    {% empty %}
                                    <tr>
                                       <td colspan="8" class="text-center text-muted py-4">
                                          <i class="fas fa-user-graduate fa-2x mb-2"></i><br>
                                          No students found. <a href="{% url 'add_student' %}">Add your first student</a>.
                                       </td>
                                    </tr>
                                    {% endfor %}
                                 </tbody>
                              </table>
                           </div>
                           
                           {% if students %}
                           <div class="row mt-3">
                              <div class="col-md-6">
                                 <p class="text-muted mb-0">
                                    Showing {{ students|length }} student{{ students|length|pluralize }}
                                 </p>
                              </div>
                              <div class="col-md-6 text-right">
                                 <small class="text-muted">Total Students: {{ students|length }}</small>
                              </div>
                           </div>
                           {% endif %}
                        </div>
                     </div>
                  </div>
               </div>
            </div>
            <footer>
               <p>Copyright Â© 2025 Smart Campus.</p>
            </footer>
         </div>
      </div>
      <script src="{%static 'assets/js/jquery-3.6.0.min.js' %}"></script>
      <script src="{%static 'assets/js/popper.min.js' %}"></script>
      <script src="{%static 'assets/plugins/bootstrap/js/bootstrap.min.js' %}"></script>
      <script src="{%static 'assets/plugins/slimscroll/jquery.slimscroll.min.js' %}"></script>
      <script src="{%static 'assets/js/script.js' %}"></script>
   </body>
   
</html>

{% endblock %}
